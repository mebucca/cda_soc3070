<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Notebook clase #11: Método de Bootstrap</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="nb_11_files/libs/clipboard/clipboard.min.js"></script>
<script src="nb_11_files/libs/quarto-html/quarto.js"></script>
<script src="nb_11_files/libs/quarto-html/popper.min.js"></script>
<script src="nb_11_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="nb_11_files/libs/quarto-html/anchor.min.js"></script>
<link href="nb_11_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="nb_11_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="nb_11_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="nb_11_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="nb_11_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Notebook clase #11: Método de Bootstrap</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="problema" class="level2">
<h2 class="anchored" data-anchor-id="problema">Problema</h2>
<p>Una regresión logística que modela las log-odds de ser liberado tras una detención por porte de pequeñas cantidades de marihuana indica que ni la raza, ni el género ni la edad tienen efectos significativos. Sin embargo, para asegurarnos, calculamos la diferencia en las probabilidades predichas de ser liberado entre un hombre blanco de 20 años y una mujer negra de 50 años, dos perfiles que, intuitivamente, podrían mostrar diferencias importantes en sus probabilidades predichas de liberación.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargar las librerías necesarias</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(carData)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modelr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargar el conjunto de datos</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>data_arrest <span class="ot">&lt;-</span> carData<span class="sc">::</span>Arrests</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajustamos un modelo de regresión logística </span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">glm</span>(released <span class="sc">~</span> <span class="fu">factor</span>(colour)<span class="sc">*</span><span class="fu">factor</span>(sex) <span class="sc">+</span> age, <span class="at">family =</span> <span class="st">"binomial"</span>, <span class="at">data =</span> data_arrest)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = released ~ factor(colour) * factor(sex) + age, 
    family = "binomial", data = data_arrest)

Coefficients:
                                     Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)                          1.771263   0.324456   5.459 4.78e-08 ***
factor(colour)White                  0.338268   0.342260   0.988   0.3230    
factor(sex)Male                     -0.477203   0.313439  -1.522   0.1279    
age                                 -0.010561   0.004293  -2.460   0.0139 *  
factor(colour)White:factor(sex)Male  0.412023   0.351676   1.172   0.2414    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 4776.3  on 5225  degrees of freedom
Residual deviance: 4680.8  on 5221  degrees of freedom
AIC: 4690.8

Number of Fisher Scoring iterations: 4</code></pre>
</div>
</div>
<p>Dado que la distribución muestral de esta diferencia es compleja, utilizaremos el método de Bootstrap para hacer inferencia estadística y estimar un intervalo de confianza para la diferencia en las probabilidades predichas.</p>
</section>
<section id="código" class="level2">
<h2 class="anchored" data-anchor-id="código">Código</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Inicializar el vector para almacenar resultados de Bootstrap</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterar 1000 veces para realizar el Bootstrap</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>) {</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Cargar el conjunto de datos</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  data_arrest <span class="ot">&lt;-</span> carData<span class="sc">::</span>Arrests</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Realizar una muestra aleatoria con reemplazo del mismo tamaño que el conjunto original</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  data_bs <span class="ot">&lt;-</span> <span class="fu">sample_n</span>(data_arrest, <span class="at">size=</span> <span class="fu">nrow</span>(data_arrest), <span class="at">replace =</span> T)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Ajustar un modelo de regresión logística con las variables deseadas</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  model <span class="ot">&lt;-</span> <span class="fu">glm</span>(released <span class="sc">~</span> <span class="fu">factor</span>(colour)<span class="sc">*</span><span class="fu">factor</span>(sex) <span class="sc">+</span> age, <span class="at">family =</span> <span class="st">"binomial"</span>, <span class="at">data =</span> data_bs)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Crear nuevos puntos de datos para la predicción</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  newx_mnv <span class="ot">&lt;-</span> <span class="fu">data_grid</span>(<span class="at">colour=</span><span class="st">"Black"</span>, <span class="at">sex=</span><span class="st">"Female"</span>, <span class="at">age=</span><span class="dv">50</span>, <span class="at">data=</span>data_arrest)</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  pred_mnv <span class="ot">&lt;-</span> <span class="fu">predict</span>(model, <span class="at">newdata =</span> newx_mnv, <span class="at">type =</span> <span class="st">"response"</span> )</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  newx_hbj <span class="ot">&lt;-</span> <span class="fu">data_grid</span>(<span class="at">colour=</span><span class="st">"White"</span>, <span class="at">sex=</span><span class="st">"Male"</span>, <span class="at">age=</span><span class="dv">20</span>, <span class="at">data=</span>data_arrest)</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  pred_hbj <span class="ot">&lt;-</span> <span class="fu">predict</span>(model, <span class="at">newdata =</span> newx_hbj, <span class="at">type =</span> <span class="st">"response"</span> )</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calcular la diferencia entre las probabilidades predichas</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>  diff_p <span class="ot">&lt;-</span> pred_hbj <span class="sc">-</span> pred_mnv</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Imprimir la iteración actual para seguimiento</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"iter="</span>,i,<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Almacenar el resultado</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>  results[i] <span class="ot">&lt;-</span> diff_p</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>iter= 1 
iter= 2 
iter= 3 
iter= 4 
iter= 5 
iter= 6 
iter= 7 
iter= 8 
iter= 9 
iter= 10 
iter= 11 
iter= 12 
iter= 13 
iter= 14 
iter= 15 
iter= 16 
iter= 17 
iter= 18 
iter= 19 
iter= 20 
iter= 21 
iter= 22 
iter= 23 
iter= 24 
iter= 25 
iter= 26 
iter= 27 
iter= 28 
iter= 29 
iter= 30 
iter= 31 
iter= 32 
iter= 33 
iter= 34 
iter= 35 
iter= 36 
iter= 37 
iter= 38 
iter= 39 
iter= 40 
iter= 41 
iter= 42 
iter= 43 
iter= 44 
iter= 45 
iter= 46 
iter= 47 
iter= 48 
iter= 49 
iter= 50 
iter= 51 
iter= 52 
iter= 53 
iter= 54 
iter= 55 
iter= 56 
iter= 57 
iter= 58 
iter= 59 
iter= 60 
iter= 61 
iter= 62 
iter= 63 
iter= 64 
iter= 65 
iter= 66 
iter= 67 
iter= 68 
iter= 69 
iter= 70 
iter= 71 
iter= 72 
iter= 73 
iter= 74 
iter= 75 
iter= 76 
iter= 77 
iter= 78 
iter= 79 
iter= 80 
iter= 81 
iter= 82 
iter= 83 
iter= 84 
iter= 85 
iter= 86 
iter= 87 
iter= 88 
iter= 89 
iter= 90 
iter= 91 
iter= 92 
iter= 93 
iter= 94 
iter= 95 
iter= 96 
iter= 97 
iter= 98 
iter= 99 
iter= 100 
iter= 101 
iter= 102 
iter= 103 
iter= 104 
iter= 105 
iter= 106 
iter= 107 
iter= 108 
iter= 109 
iter= 110 
iter= 111 
iter= 112 
iter= 113 
iter= 114 
iter= 115 
iter= 116 
iter= 117 
iter= 118 
iter= 119 
iter= 120 
iter= 121 
iter= 122 
iter= 123 
iter= 124 
iter= 125 
iter= 126 
iter= 127 
iter= 128 
iter= 129 
iter= 130 
iter= 131 
iter= 132 
iter= 133 
iter= 134 
iter= 135 
iter= 136 
iter= 137 
iter= 138 
iter= 139 
iter= 140 
iter= 141 
iter= 142 
iter= 143 
iter= 144 
iter= 145 
iter= 146 
iter= 147 
iter= 148 
iter= 149 
iter= 150 
iter= 151 
iter= 152 
iter= 153 
iter= 154 
iter= 155 
iter= 156 
iter= 157 
iter= 158 
iter= 159 
iter= 160 
iter= 161 
iter= 162 
iter= 163 
iter= 164 
iter= 165 
iter= 166 
iter= 167 
iter= 168 
iter= 169 
iter= 170 
iter= 171 
iter= 172 
iter= 173 
iter= 174 
iter= 175 
iter= 176 
iter= 177 
iter= 178 
iter= 179 
iter= 180 
iter= 181 
iter= 182 
iter= 183 
iter= 184 
iter= 185 
iter= 186 
iter= 187 
iter= 188 
iter= 189 
iter= 190 
iter= 191 
iter= 192 
iter= 193 
iter= 194 
iter= 195 
iter= 196 
iter= 197 
iter= 198 
iter= 199 
iter= 200 
iter= 201 
iter= 202 
iter= 203 
iter= 204 
iter= 205 
iter= 206 
iter= 207 
iter= 208 
iter= 209 
iter= 210 
iter= 211 
iter= 212 
iter= 213 
iter= 214 
iter= 215 
iter= 216 
iter= 217 
iter= 218 
iter= 219 
iter= 220 
iter= 221 
iter= 222 
iter= 223 
iter= 224 
iter= 225 
iter= 226 
iter= 227 
iter= 228 
iter= 229 
iter= 230 
iter= 231 
iter= 232 
iter= 233 
iter= 234 
iter= 235 
iter= 236 
iter= 237 
iter= 238 
iter= 239 
iter= 240 
iter= 241 
iter= 242 
iter= 243 
iter= 244 
iter= 245 
iter= 246 
iter= 247 
iter= 248 
iter= 249 
iter= 250 
iter= 251 
iter= 252 
iter= 253 
iter= 254 
iter= 255 
iter= 256 
iter= 257 
iter= 258 
iter= 259 
iter= 260 
iter= 261 
iter= 262 
iter= 263 
iter= 264 
iter= 265 
iter= 266 
iter= 267 
iter= 268 
iter= 269 
iter= 270 
iter= 271 
iter= 272 
iter= 273 
iter= 274 
iter= 275 
iter= 276 
iter= 277 
iter= 278 
iter= 279 
iter= 280 
iter= 281 
iter= 282 
iter= 283 
iter= 284 
iter= 285 
iter= 286 
iter= 287 
iter= 288 
iter= 289 
iter= 290 
iter= 291 
iter= 292 
iter= 293 
iter= 294 
iter= 295 
iter= 296 
iter= 297 
iter= 298 
iter= 299 
iter= 300 
iter= 301 
iter= 302 
iter= 303 
iter= 304 
iter= 305 
iter= 306 
iter= 307 
iter= 308 
iter= 309 
iter= 310 
iter= 311 
iter= 312 
iter= 313 
iter= 314 
iter= 315 
iter= 316 
iter= 317 
iter= 318 
iter= 319 
iter= 320 
iter= 321 
iter= 322 
iter= 323 
iter= 324 
iter= 325 
iter= 326 
iter= 327 
iter= 328 
iter= 329 
iter= 330 
iter= 331 
iter= 332 
iter= 333 
iter= 334 
iter= 335 
iter= 336 
iter= 337 
iter= 338 
iter= 339 
iter= 340 
iter= 341 
iter= 342 
iter= 343 
iter= 344 
iter= 345 
iter= 346 
iter= 347 
iter= 348 
iter= 349 
iter= 350 
iter= 351 
iter= 352 
iter= 353 
iter= 354 
iter= 355 
iter= 356 
iter= 357 
iter= 358 
iter= 359 
iter= 360 
iter= 361 
iter= 362 
iter= 363 
iter= 364 
iter= 365 
iter= 366 
iter= 367 
iter= 368 
iter= 369 
iter= 370 
iter= 371 
iter= 372 
iter= 373 
iter= 374 
iter= 375 
iter= 376 
iter= 377 
iter= 378 
iter= 379 
iter= 380 
iter= 381 
iter= 382 
iter= 383 
iter= 384 
iter= 385 
iter= 386 
iter= 387 
iter= 388 
iter= 389 
iter= 390 
iter= 391 
iter= 392 
iter= 393 
iter= 394 
iter= 395 
iter= 396 
iter= 397 
iter= 398 
iter= 399 
iter= 400 
iter= 401 
iter= 402 
iter= 403 
iter= 404 
iter= 405 
iter= 406 
iter= 407 
iter= 408 
iter= 409 
iter= 410 
iter= 411 
iter= 412 
iter= 413 
iter= 414 
iter= 415 
iter= 416 
iter= 417 
iter= 418 
iter= 419 
iter= 420 
iter= 421 
iter= 422 
iter= 423 
iter= 424 
iter= 425 
iter= 426 
iter= 427 
iter= 428 
iter= 429 
iter= 430 
iter= 431 
iter= 432 
iter= 433 
iter= 434 
iter= 435 
iter= 436 
iter= 437 
iter= 438 
iter= 439 
iter= 440 
iter= 441 
iter= 442 
iter= 443 
iter= 444 
iter= 445 
iter= 446 
iter= 447 
iter= 448 
iter= 449 
iter= 450 
iter= 451 
iter= 452 
iter= 453 
iter= 454 
iter= 455 
iter= 456 
iter= 457 
iter= 458 
iter= 459 
iter= 460 
iter= 461 
iter= 462 
iter= 463 
iter= 464 
iter= 465 
iter= 466 
iter= 467 
iter= 468 
iter= 469 
iter= 470 
iter= 471 
iter= 472 
iter= 473 
iter= 474 
iter= 475 
iter= 476 
iter= 477 
iter= 478 
iter= 479 
iter= 480 
iter= 481 
iter= 482 
iter= 483 
iter= 484 
iter= 485 
iter= 486 
iter= 487 
iter= 488 
iter= 489 
iter= 490 
iter= 491 
iter= 492 
iter= 493 
iter= 494 
iter= 495 
iter= 496 
iter= 497 
iter= 498 
iter= 499 
iter= 500 
iter= 501 
iter= 502 
iter= 503 
iter= 504 
iter= 505 
iter= 506 
iter= 507 
iter= 508 
iter= 509 
iter= 510 
iter= 511 
iter= 512 
iter= 513 
iter= 514 
iter= 515 
iter= 516 
iter= 517 
iter= 518 
iter= 519 
iter= 520 
iter= 521 
iter= 522 
iter= 523 
iter= 524 
iter= 525 
iter= 526 
iter= 527 
iter= 528 
iter= 529 
iter= 530 
iter= 531 
iter= 532 
iter= 533 
iter= 534 
iter= 535 
iter= 536 
iter= 537 
iter= 538 
iter= 539 
iter= 540 
iter= 541 
iter= 542 
iter= 543 
iter= 544 
iter= 545 
iter= 546 
iter= 547 
iter= 548 
iter= 549 
iter= 550 
iter= 551 
iter= 552 
iter= 553 
iter= 554 
iter= 555 
iter= 556 
iter= 557 
iter= 558 
iter= 559 
iter= 560 
iter= 561 
iter= 562 
iter= 563 
iter= 564 
iter= 565 
iter= 566 
iter= 567 
iter= 568 
iter= 569 
iter= 570 
iter= 571 
iter= 572 
iter= 573 
iter= 574 
iter= 575 
iter= 576 
iter= 577 
iter= 578 
iter= 579 
iter= 580 
iter= 581 
iter= 582 
iter= 583 
iter= 584 
iter= 585 
iter= 586 
iter= 587 
iter= 588 
iter= 589 
iter= 590 
iter= 591 
iter= 592 
iter= 593 
iter= 594 
iter= 595 
iter= 596 
iter= 597 
iter= 598 
iter= 599 
iter= 600 
iter= 601 
iter= 602 
iter= 603 
iter= 604 
iter= 605 
iter= 606 
iter= 607 
iter= 608 
iter= 609 
iter= 610 
iter= 611 
iter= 612 
iter= 613 
iter= 614 
iter= 615 
iter= 616 
iter= 617 
iter= 618 
iter= 619 
iter= 620 
iter= 621 
iter= 622 
iter= 623 
iter= 624 
iter= 625 
iter= 626 
iter= 627 
iter= 628 
iter= 629 
iter= 630 
iter= 631 
iter= 632 
iter= 633 
iter= 634 
iter= 635 
iter= 636 
iter= 637 
iter= 638 
iter= 639 
iter= 640 
iter= 641 
iter= 642 
iter= 643 
iter= 644 
iter= 645 
iter= 646 
iter= 647 
iter= 648 
iter= 649 
iter= 650 
iter= 651 
iter= 652 
iter= 653 
iter= 654 
iter= 655 
iter= 656 
iter= 657 
iter= 658 
iter= 659 
iter= 660 
iter= 661 
iter= 662 
iter= 663 
iter= 664 
iter= 665 
iter= 666 
iter= 667 
iter= 668 
iter= 669 
iter= 670 
iter= 671 
iter= 672 
iter= 673 
iter= 674 
iter= 675 
iter= 676 
iter= 677 
iter= 678 
iter= 679 
iter= 680 
iter= 681 
iter= 682 
iter= 683 
iter= 684 
iter= 685 
iter= 686 
iter= 687 
iter= 688 
iter= 689 
iter= 690 
iter= 691 
iter= 692 
iter= 693 
iter= 694 
iter= 695 
iter= 696 
iter= 697 
iter= 698 
iter= 699 
iter= 700 
iter= 701 
iter= 702 
iter= 703 
iter= 704 
iter= 705 
iter= 706 
iter= 707 
iter= 708 
iter= 709 
iter= 710 
iter= 711 
iter= 712 
iter= 713 
iter= 714 
iter= 715 
iter= 716 
iter= 717 
iter= 718 
iter= 719 
iter= 720 
iter= 721 
iter= 722 
iter= 723 
iter= 724 
iter= 725 
iter= 726 
iter= 727 
iter= 728 
iter= 729 
iter= 730 
iter= 731 
iter= 732 
iter= 733 
iter= 734 
iter= 735 
iter= 736 
iter= 737 
iter= 738 
iter= 739 
iter= 740 
iter= 741 
iter= 742 
iter= 743 
iter= 744 
iter= 745 
iter= 746 
iter= 747 
iter= 748 
iter= 749 
iter= 750 
iter= 751 
iter= 752 
iter= 753 
iter= 754 
iter= 755 
iter= 756 
iter= 757 
iter= 758 
iter= 759 
iter= 760 
iter= 761 
iter= 762 
iter= 763 
iter= 764 
iter= 765 
iter= 766 
iter= 767 
iter= 768 
iter= 769 
iter= 770 
iter= 771 
iter= 772 
iter= 773 
iter= 774 
iter= 775 
iter= 776 
iter= 777 
iter= 778 
iter= 779 
iter= 780 
iter= 781 
iter= 782 
iter= 783 
iter= 784 
iter= 785 
iter= 786 
iter= 787 
iter= 788 
iter= 789 
iter= 790 
iter= 791 
iter= 792 
iter= 793 
iter= 794 
iter= 795 
iter= 796 
iter= 797 
iter= 798 
iter= 799 
iter= 800 
iter= 801 
iter= 802 
iter= 803 
iter= 804 
iter= 805 
iter= 806 
iter= 807 
iter= 808 
iter= 809 
iter= 810 
iter= 811 
iter= 812 
iter= 813 
iter= 814 
iter= 815 
iter= 816 
iter= 817 
iter= 818 
iter= 819 
iter= 820 
iter= 821 
iter= 822 
iter= 823 
iter= 824 
iter= 825 
iter= 826 
iter= 827 
iter= 828 
iter= 829 
iter= 830 
iter= 831 
iter= 832 
iter= 833 
iter= 834 
iter= 835 
iter= 836 
iter= 837 
iter= 838 
iter= 839 
iter= 840 
iter= 841 
iter= 842 
iter= 843 
iter= 844 
iter= 845 
iter= 846 
iter= 847 
iter= 848 
iter= 849 
iter= 850 
iter= 851 
iter= 852 
iter= 853 
iter= 854 
iter= 855 
iter= 856 
iter= 857 
iter= 858 
iter= 859 
iter= 860 
iter= 861 
iter= 862 
iter= 863 
iter= 864 
iter= 865 
iter= 866 
iter= 867 
iter= 868 
iter= 869 
iter= 870 
iter= 871 
iter= 872 
iter= 873 
iter= 874 
iter= 875 
iter= 876 
iter= 877 
iter= 878 
iter= 879 
iter= 880 
iter= 881 
iter= 882 
iter= 883 
iter= 884 
iter= 885 
iter= 886 
iter= 887 
iter= 888 
iter= 889 
iter= 890 
iter= 891 
iter= 892 
iter= 893 
iter= 894 
iter= 895 
iter= 896 
iter= 897 
iter= 898 
iter= 899 
iter= 900 
iter= 901 
iter= 902 
iter= 903 
iter= 904 
iter= 905 
iter= 906 
iter= 907 
iter= 908 
iter= 909 
iter= 910 
iter= 911 
iter= 912 
iter= 913 
iter= 914 
iter= 915 
iter= 916 
iter= 917 
iter= 918 
iter= 919 
iter= 920 
iter= 921 
iter= 922 
iter= 923 
iter= 924 
iter= 925 
iter= 926 
iter= 927 
iter= 928 
iter= 929 
iter= 930 
iter= 931 
iter= 932 
iter= 933 
iter= 934 
iter= 935 
iter= 936 
iter= 937 
iter= 938 
iter= 939 
iter= 940 
iter= 941 
iter= 942 
iter= 943 
iter= 944 
iter= 945 
iter= 946 
iter= 947 
iter= 948 
iter= 949 
iter= 950 
iter= 951 
iter= 952 
iter= 953 
iter= 954 
iter= 955 
iter= 956 
iter= 957 
iter= 958 
iter= 959 
iter= 960 
iter= 961 
iter= 962 
iter= 963 
iter= 964 
iter= 965 
iter= 966 
iter= 967 
iter= 968 
iter= 969 
iter= 970 
iter= 971 
iter= 972 
iter= 973 
iter= 974 
iter= 975 
iter= 976 
iter= 977 
iter= 978 
iter= 979 
iter= 980 
iter= 981 
iter= 982 
iter= 983 
iter= 984 
iter= 985 
iter= 986 
iter= 987 
iter= 988 
iter= 989 
iter= 990 
iter= 991 
iter= 992 
iter= 993 
iter= 994 
iter= 995 
iter= 996 
iter= 997 
iter= 998 
iter= 999 
iter= 1000 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar la distribución de las diferencias en probabilidad</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(results, <span class="at">main=</span><span class="st">"Distribución de la diferencia en probabilidades predichas"</span>, <span class="at">xlab=</span><span class="st">"Diferencia en probabilidades"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="nb_11_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular el intervalo de confianza al 95% para la diferencia en probabilidades</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(results, <span class="at">p=</span><span class="fu">c</span>(<span class="fl">0.025</span>, <span class="fl">0.975</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       2.5%       97.5% 
-0.02481977  0.20492533 </code></pre>
</div>
</div>
<p>El resultados indica que, al 95% de confianza, no existe una diferencia significativa entre la probabilidad de ser liberada entre una mujer negra de 50 años y un hombre blanco de 20 años.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>